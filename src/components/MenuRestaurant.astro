---
// RestaurantModal.astro
interface Props {
  title?: string;
  buttonText?: string;
  whatsappNumber?: string;
}

const {
  title = "Savana Grill & Bistro",
  buttonText = "View Menu & Order",
  whatsappNumber = "+254712345678",
} = Astro.props;
---

<div class="restaurant-modal-wrapper">
  <!-- Trigger Button -->
  <button
    id="openModal"
    class="modal-trigger-btn"
    aria-label="Open restaurant menu modal"
  >
    <span class="btn-text">{buttonText}</span>
    <div class="btn-icon">
      <svg
        class="w-5 h-5"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
      </svg>
    </div>
  </button>

  <!-- Modal Backdrop -->
  <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
    <!-- Modal Container -->
    <div
      id="modalContainer"
      class="modal-container"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-title"
    >
      <!-- Compact Header -->
      <div class="modal-header">
        <button
          id="closeModal"
          class="modal-close-btn"
          aria-label="Close modal"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
        <h2 id="modal-title" class="modal-title">{title}</h2>
        <span class="location-badge">Westlands, Nairobi</span>
      </div>

      <!-- Search and Filter Section -->
      <div class="search-section">
        <div class="search-container">
          <svg
            class="search-icon"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          <input
            type="text"
            id="menuSearch"
            placeholder="Search menu items..."
            class="search-input"
          />
          <button id="clearSearch" class="clear-search" style="display: none;">
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        <div class="filter-tabs">
          <button class="filter-tab active" data-category="all">All</button>
          <button class="filter-tab" data-category="appetizers">Starters</button
          >
          <button class="filter-tab" data-category="mains">Mains</button>
          <button class="filter-tab" data-category="grills">Grills</button>
          <button class="filter-tab" data-category="seafood">Seafood</button>
          <button class="filter-tab" data-category="vegetarian">Veggie</button>
          <button class="filter-tab" data-category="desserts">Desserts</button>
          <button class="filter-tab" data-category="beverages">Drinks</button>
        </div>
      </div>

      <!-- Modal Content -->
      <div class="modal-content">
        <!-- Menu Items Grid -->
        <div id="menuGrid" class="menu-grid">
          <!-- Appetizers -->
          <div
            class="menu-item"
            data-category="appetizers"
            data-name="samosas chicken beef vegetable appetizer starter"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Mixed Samosas (3 pcs)</h4>
                <span class="item-price">KSh 450</span>
              </div>
              <p class="item-desc">
                Crispy pastries filled with spiced chicken, beef, or vegetables.
                Served with mint chutney
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag popular">Popular</span>
                  <span class="tag spicy">Spicy</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Mixed Samosas (3 pcs)"
                  data-price="450"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <div
            class="menu-item"
            data-category="appetizers"
            data-name="chicken wings buffalo hot spicy appetizer"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Buffalo Chicken Wings (8 pcs)</h4>
                <span class="item-price">KSh 850</span>
              </div>
              <p class="item-desc">
                Crispy chicken wings tossed in buffalo sauce, served with celery
                sticks and blue cheese dip
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag spicy">Hot</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Buffalo Chicken Wings (8 pcs)"
                  data-price="850"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <div
            class="menu-item"
            data-category="appetizers"
            data-name="calamari rings seafood fried appetizer"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Crispy Calamari Rings</h4>
                <span class="item-price">KSh 1,200</span>
              </div>
              <p class="item-desc">
                Fresh squid rings in seasoned batter, served with garlic aioli
                and lemon wedges
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag fresh">Fresh</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Crispy Calamari Rings"
                  data-price="1200"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <!-- Main Courses -->
          <div
            class="menu-item"
            data-category="mains"
            data-name="nyama choma beef grilled kenyan main course"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Premium Nyama Choma</h4>
                <span class="item-price">KSh 1,800</span>
              </div>
              <p class="item-desc">
                Tender grilled beef served with ugali, sukuma wiki, and
                traditional salad
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag signature">Signature</span>
                  <span class="tag local">Local</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Premium Nyama Choma"
                  data-price="1800"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <div
            class="menu-item"
            data-category="mains"
            data-name="pilau rice beef spiced kenyan main course"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Authentic Beef Pilau</h4>
                <span class="item-price">KSh 1,200</span>
              </div>
              <p class="item-desc">
                Fragrant basmati rice cooked with tender beef, aromatic spices,
                and served with kachumbari
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag traditional">Traditional</span>
                  <span class="tag aromatic">Aromatic</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Authentic Beef Pilau"
                  data-price="1200"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <div
            class="menu-item"
            data-category="mains"
            data-name="chicken curry coconut rice indian main course"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Coconut Chicken Curry</h4>
                <span class="item-price">KSh 1,400</span>
              </div>
              <p class="item-desc">
                Tender chicken in rich coconut curry sauce, served with jasmine
                rice and naan bread
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag creamy">Creamy</span>
                  <span class="tag mild">Mild</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Coconut Chicken Curry"
                  data-price="1400"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <!-- Grills -->
          <div
            class="menu-item"
            data-category="grills"
            data-name="ribeye steak beef grilled premium"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Prime Ribeye Steak (300g)</h4>
                <span class="item-price">KSh 2,800</span>
              </div>
              <p class="item-desc">
                Premium cut ribeye grilled to perfection, served with garlic
                butter, roasted vegetables, and mashed potatoes
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag premium">Premium</span>
                  <span class="tag chef">Chef's Choice</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Prime Ribeye Steak (300g)"
                  data-price="2800"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <div
            class="menu-item"
            data-category="grills"
            data-name="lamb chops grilled mint sauce"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Herb Crusted Lamb Chops</h4>
                <span class="item-price">KSh 2,200</span>
              </div>
              <p class="item-desc">
                Tender lamb chops with herb crust, served with mint sauce and
                seasonal vegetables
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag gourmet">Gourmet</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Herb Crusted Lamb Chops"
                  data-price="2200"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <!-- Seafood -->
          <div
            class="menu-item"
            data-category="seafood"
            data-name="tilapia fish grilled lemon butter"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Grilled Tilapia Fillet</h4>
                <span class="item-price">KSh 1,600</span>
              </div>
              <p class="item-desc">
                Fresh Lake Victoria tilapia grilled with lemon butter, served
                with coconut rice and steamed vegetables
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag fresh">Fresh</span>
                  <span class="tag local">Local Catch</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Grilled Tilapia Fillet"
                  data-price="1600"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <div
            class="menu-item"
            data-category="seafood"
            data-name="prawns garlic butter grilled seafood"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Garlic Butter Prawns</h4>
                <span class="item-price">KSh 2,400</span>
              </div>
              <p class="item-desc">
                Jumbo prawns sautéed in garlic butter with herbs, served with
                wild rice and mixed greens
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag jumbo">Jumbo</span>
                  <span class="tag buttery">Buttery</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Garlic Butter Prawns"
                  data-price="2400"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <div
            class="menu-item"
            data-category="seafood"
            data-name="fish stew coconut curry sauce"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Swahili Fish Curry</h4>
                <span class="item-price">KSh 1,500</span>
              </div>
              <p class="item-desc">
                Fresh fish in rich coconut curry with Swahili spices, served
                with chapati or rice
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag signature">Signature</span>
                  <span class="tag spicy">Medium Spicy</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Swahili Fish Curry"
                  data-price="1500"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <!-- Vegetarian -->
          <div
            class="menu-item"
            data-category="vegetarian"
            data-name="vegetable biryani rice spiced vegetarian"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Vegetable Biryani</h4>
                <span class="item-price">KSh 900</span>
              </div>
              <p class="item-desc">
                Fragrant basmati rice layered with mixed vegetables and aromatic
                spices, served with raita
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag vegan">Vegan</span>
                  <span class="tag aromatic">Aromatic</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Vegetable Biryani"
                  data-price="900"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <div
            class="menu-item"
            data-category="vegetarian"
            data-name="pasta primavera vegetables cream sauce"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Pasta Primavera</h4>
                <span class="item-price">KSh 1,100</span>
              </div>
              <p class="item-desc">
                Fresh fettuccine with seasonal vegetables in creamy herb sauce,
                topped with parmesan
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag creamy">Creamy</span>
                  <span class="tag seasonal">Seasonal</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Pasta Primavera"
                  data-price="1100"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <!-- Desserts -->
          <div
            class="menu-item"
            data-category="desserts"
            data-name="chocolate lava cake dessert warm"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Chocolate Lava Cake</h4>
                <span class="item-price">KSh 650</span>
              </div>
              <p class="item-desc">
                Warm chocolate cake with molten center, served with vanilla ice
                cream and berry compote
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag popular">Popular</span>
                  <span class="tag warm">Warm</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Chocolate Lava Cake"
                  data-price="650"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <div
            class="menu-item"
            data-category="desserts"
            data-name="tiramisu coffee italian dessert"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Classic Tiramisu</h4>
                <span class="item-price">KSh 580</span>
              </div>
              <p class="item-desc">
                Traditional Italian dessert with coffee-soaked ladyfingers and
                mascarpone cream
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag classic">Classic</span>
                  <span class="tag coffee">Coffee</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Classic Tiramisu"
                  data-price="580"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <!-- Beverages -->
          <div
            class="menu-item"
            data-category="beverages"
            data-name="coffee espresso cappuccino latte"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Specialty Coffee</h4>
                <span class="item-price">KSh 300</span>
              </div>
              <p class="item-desc">
                Freshly brewed Kenyan coffee - Espresso, Cappuccino, Latte, or
                Americano
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag local">Local Beans</span>
                  <span class="tag fresh">Fresh</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Specialty Coffee"
                  data-price="300"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <div
            class="menu-item"
            data-category="beverages"
            data-name="fresh juice mango passion orange"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">Fresh Tropical Juices</h4>
                <span class="item-price">KSh 350</span>
              </div>
              <p class="item-desc">
                Mango, Passion Fruit, Orange, Pineapple, or mixed tropical blend
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag natural">100% Natural</span>
                  <span class="tag tropical">Tropical</span>
                </div>
                <button
                  class="order-btn"
                  data-item="Fresh Tropical Juices"
                  data-price="350"
                >
                  Order
                </button>
              </div>
            </div>
          </div>

          <div
            class="menu-item"
            data-category="beverages"
            data-name="wine red white bottle glass alcohol"
          >
            <div class="item-content">
              <div class="item-header">
                <h4 class="item-name">House Wine Selection</h4>
                <span class="item-price">KSh 450</span>
              </div>
              <p class="item-desc">
                Red or White wine by the glass or bottle. Ask for today's
                selection
              </p>
              <div class="item-footer">
                <div class="item-tags">
                  <span class="tag curated">Curated</span>
                  <span class="tag premium">Premium</span>
                </div>
                <button
                  class="order-btn"
                  data-item="House Wine Selection"
                  data-price="450"
                >
                  Order
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- No Results Message -->
        <div id="noResults" class="no-results" style="display: none;">
          <div class="no-results-content">
            <svg
              class="w-12 h-12"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <h3>No items found</h3>
            <p>Try adjusting your search or browse different categories</p>
          </div>
        </div>

        <!-- Quick Order Notice -->
        <div class="order-notice">
          <div class="notice-icon">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M.057 24l1.687-6.163c.007-.025.018-.049.03-.072.12-.277.372-.456.651-.456.379 0 .687.308.687.688 0 .379-.308.688-.688.688-.245 0-.461-.138-.571-.359l-1.176 4.305L23.993 24l-23.936 0z"
              ></path>
            </svg>
          </div>
          <div class="notice-text">
            <span class="notice-title">Quick WhatsApp Ordering</span>
            <span class="notice-desc"
              >Click any "Order" button to place your order via WhatsApp • {
                whatsappNumber
              }</span
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .restaurant-modal-wrapper {
    position: relative;
  }

  /* Enhanced Trigger Button */
  .modal-trigger-btn {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    padding: 16px 32px;
    background: linear-gradient(135deg, #8b5a2b, #d2691e, #cd853f);
    color: white;
    border: none;
    border-radius: 16px;
    font-weight: 700;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow:
      0 8px 32px rgba(139, 90, 43, 0.3),
      0 0 0 1px rgba(255, 255, 255, 0.1) inset;
    position: relative;
    overflow: hidden;
  }

  .modal-trigger-btn::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.2),
      transparent
    );
    transition: left 0.5s ease;
  }

  .modal-trigger-btn:hover::before {
    left: 100%;
  }

  .modal-trigger-btn:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow:
      0 12px 40px rgba(139, 90, 43, 0.4),
      0 0 0 1px rgba(255, 255, 255, 0.2) inset;
  }

  .btn-icon {
    background: rgba(255, 255, 255, 0.15);
    padding: 6px;
    border-radius: 50%;
    transition: transform 0.3s ease;
  }

  .modal-trigger-btn:hover .btn-icon {
    transform: rotate(90deg);
  }

  /* Modal Backdrop */
  .modal-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.9));
    backdrop-filter: blur(8px);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  .modal-backdrop.active {
    opacity: 1;
    visibility: visible;
  }

  /* Modal Container */
  .modal-container {
    background: #ffffff;
    border-radius: 20px;
    width: 100%;
    max-width: 900px;
    max-height: 95vh;
    overflow: hidden;
    position: relative;
    box-shadow: 0 24px 48px rgba(0, 0, 0, 0.25);
    transform: scale(0.9) translateY(20px);
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  .modal-backdrop.active .modal-container {
    transform: scale(1) translateY(0);
  }

  /* Compact Header */
  .modal-header {
    background: linear-gradient(135deg, #2d1b14, #3d2317);
    color: white;
    padding: 20px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
  }

  .modal-close-btn {
    position: absolute;
    top: 16px;
    right: 16px;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    z-index: 10;
  }

  .modal-close-btn:hover {
    background: rgba(220, 38, 38, 0.2);
    border-color: rgba(220, 38, 38, 0.4);
    transform: scale(1.1);
  }

  .modal-title {
    font-size: 1.5rem;
    font-weight: 800;
    margin: 0;
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .location-badge {
    font-size: 0.85rem;
    background: rgba(251, 191, 36, 0.15);
    color: #fbbf24;
    padding: 4px 12px;
    border-radius: 12px;
    border: 1px solid rgba(251, 191, 36, 0.3);
  }

  /* Search Section */
  .search-section {
    background: #f8f9fa;
    padding: 20px 24px;
    border-bottom: 1px solid #e9ecef;
  }

  .search-container {
    position: relative;
    margin-bottom: 16px;
  }

  .search-icon {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    color: #6c757d;
  }

  .search-input {
    width: 100%;
    padding: 12px 40px 12px 40px;
    border: 2px solid #e9ecef;
    border-radius: 12px;
    font-size: 15px;
    background: white;
    transition: all 0.2s ease;
  }

  .search-input:focus {
    outline: none;
    border-color: #d97706;
    box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.1);
  }

  .clear-search {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    width: 24px;
    height: 24px;
    border: none;
    background: none;
    color: #6c757d;
    cursor: pointer;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  }

  .clear-search:hover {
    background: #f8f9fa;
    color: #dc3545;
  }

  .filter-tabs {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .filter-tab {
    padding: 8px 16px;
    border: 1px solid #e9ecef;
    border-radius: 20px;
    background: white;
    color: #6c757d;
    font-weight: 600;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
  }

  .filter-tab:hover {
    background: #f8f9fa;
    border-color: #d97706;
    color: #d97706;
  }

  .filter-tab.active {
    background: #d97706;
    color: white;
    border-color: #d97706;
  }

  /* Modal Content */
  .modal-content {
    padding: 24px;
    overflow-y: auto;
    max-height: calc(95vh - 180px);
  }

  /* Menu Grid */
  .menu-grid {
    display: grid;
    gap: 16px;
    margin-bottom: 24px;
  }

  .menu-item {
    background: white;
    border-radius: 12px;
    border: 1px solid #e9ecef;
    transition: all 0.2s ease;
    overflow: hidden;
  }

  .menu-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    border-color: #d97706;
  }

  .item-content {
    padding: 20px;
  }

  .item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
    gap: 16px;
  }

  .item-name {
    font-size: 1.1rem;
    font-weight: 700;
    color: #2d1b14;
    margin: 0;
    line-height: 1.3;
    flex: 1;
  }

  .item-price {
    font-size: 1.2rem;
    font-weight: 800;
    color: #d97706;
    white-space: nowrap;
  }

  .item-desc {
    color: #6c757d;
    margin: 0 0 16px;
    line-height: 1.5;
    font-size: 0.9rem;
  }

  .item-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
  }

  .item-tags {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    flex: 1;
  }

  .tag {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
  }

  .tag {
    background: #f8f9fa;
    color: #6c757d;
    border: 1px solid #e9ecef;
  }

  .tag.signature {
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    color: white;
    border: none;
  }

  .tag.premium {
    background: linear-gradient(135deg, #7c3aed, #a855f7);
    color: white;
    border: none;
  }

  .tag.spicy {
    background: linear-gradient(135deg, #dc2626, #ef4444);
    color: white;
    border: none;
  }

  .tag.mild {
    background: linear-gradient(135deg, #10b981, #34d399);
    color: white;
    border: none;
  }

  .tag.popular {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
    border: none;
    animation: pulse-soft 2s ease-in-out infinite;
  }

  .tag.fresh,
  .tag.local,
  .tag.natural {
    background: linear-gradient(135deg, #059669, #10b981);
    color: white;
    border: none;
  }

  .tag.vegan {
    background: linear-gradient(135deg, #16a34a, #22c55e);
    color: white;
    border: none;
  }

  .tag.traditional,
  .tag.aromatic,
  .tag.creamy,
  .tag.seasonal,
  .tag.classic,
  .tag.coffee,
  .tag.tropical,
  .tag.curated,
  .tag.gourmet,
  .tag.chef,
  .tag.jumbo,
  .tag.buttery,
  .tag.warm {
    background: #e9ecef;
    color: #495057;
  }

  @keyframes pulse-soft {
    0%,
    100% {
      box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.3);
    }
    50% {
      box-shadow: 0 0 0 4px rgba(245, 158, 11, 0);
    }
  }

  .order-btn {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    font-weight: 600;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    white-space: nowrap;
  }

  .order-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    background: linear-gradient(135deg, #059669, #047857);
  }

  .order-btn:active {
    transform: translateY(0);
  }

  /* No Results */
  .no-results {
    text-align: center;
    padding: 48px 24px;
    color: #6c757d;
  }

  .no-results-content {
    max-width: 300px;
    margin: 0 auto;
  }

  .no-results svg {
    margin: 0 auto 16px;
    opacity: 0.5;
  }

  .no-results h3 {
    font-size: 1.3rem;
    margin: 0 0 8px;
    font-weight: 700;
    color: #495057;
  }

  .no-results p {
    margin: 0;
    opacity: 0.8;
  }

  /* Order Notice */
  .order-notice {
    background: linear-gradient(135deg, #ecfdf5, #d1fae5);
    border: 1px solid rgba(16, 185, 129, 0.2);
    border-radius: 12px;
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .notice-icon {
    background: #10b981;
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .notice-text {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .notice-title {
    font-weight: 700;
    color: #065f46;
    font-size: 0.95rem;
  }

  .notice-desc {
    color: #047857;
    font-size: 0.85rem;
    line-height: 1.4;
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .modal-container {
      margin: 10px;
      border-radius: 16px;
      max-height: 98vh;
    }

    .modal-header {
      padding: 16px 20px;
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
    }

    .modal-close-btn {
      top: 12px;
      right: 12px;
    }

    .modal-title {
      font-size: 1.3rem;
    }

    .location-badge {
      font-size: 0.8rem;
    }

    .search-section {
      padding: 16px 20px;
    }

    .modal-content {
      padding: 20px;
      max-height: calc(98vh - 160px);
    }

    .item-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
    }

    .item-footer {
      flex-direction: column;
      align-items: flex-start;
      gap: 12px;
    }

    .order-btn {
      align-self: stretch;
      text-align: center;
    }

    .filter-tabs {
      gap: 4px;
      overflow-x: auto;
      padding-bottom: 4px;
    }

    .filter-tab {
      font-size: 0.8rem;
      padding: 6px 12px;
      flex-shrink: 0;
    }

    .notice-text {
      gap: 4px;
    }

    .notice-title {
      font-size: 0.9rem;
    }

    .notice-desc {
      font-size: 0.8rem;
    }
  }

  @media (max-width: 480px) {
    .modal-backdrop {
      padding: 8px;
    }

    .modal-title {
      font-size: 1.2rem;
    }

    .search-section {
      padding: 12px 16px;
    }

    .modal-content {
      padding: 16px;
    }

    .item-content {
      padding: 16px;
    }

    .item-name {
      font-size: 1rem;
    }

    .item-price {
      font-size: 1.1rem;
    }

    .filter-tabs {
      justify-content: flex-start;
    }
  }

  /* Smooth animations */
  .menu-item {
    opacity: 0;
    transform: translateY(10px);
    animation: fadeInUp 0.3s ease forwards;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Staggered animation delays */
  .menu-item:nth-child(1) {
    animation-delay: 0.05s;
  }
  .menu-item:nth-child(2) {
    animation-delay: 0.1s;
  }
  .menu-item:nth-child(3) {
    animation-delay: 0.15s;
  }
  .menu-item:nth-child(4) {
    animation-delay: 0.2s;
  }
  .menu-item:nth-child(5) {
    animation-delay: 0.25s;
  }
  .menu-item:nth-child(6) {
    animation-delay: 0.3s;
  }
  .menu-item:nth-child(7) {
    animation-delay: 0.35s;
  }
  .menu-item:nth-child(8) {
    animation-delay: 0.4s;
  }
  .menu-item:nth-child(9) {
    animation-delay: 0.45s;
  }
  .menu-item:nth-child(10) {
    animation-delay: 0.5s;
  }
</style>

<script>
  // Restaurant Modal Functionality with proper TypeScript types
  const openModalBtn = document.getElementById(
    "openModal"
  ) as HTMLButtonElement | null;
  const closeModalBtn = document.getElementById(
    "closeModal"
  ) as HTMLButtonElement | null;
  const modalBackdrop = document.getElementById(
    "modalBackdrop"
  ) as HTMLDivElement | null;
  const modalContainer = document.getElementById(
    "modalContainer"
  ) as HTMLDivElement | null;
  const menuSearch = document.getElementById(
    "menuSearch"
  ) as HTMLInputElement | null;
  const clearSearch = document.getElementById(
    "clearSearch"
  ) as HTMLButtonElement | null;
  const filterTabs = document.querySelectorAll(
    ".filter-tab"
  ) as NodeListOf<HTMLButtonElement>;
  const menuItems = document.querySelectorAll(
    ".menu-item"
  ) as NodeListOf<HTMLDivElement>;
  const noResults = document.getElementById(
    "noResults"
  ) as HTMLDivElement | null;
  const orderBtns = document.querySelectorAll(
    ".order-btn"
  ) as NodeListOf<HTMLButtonElement>;

  // WhatsApp number from props
  const whatsappNumber = "{whatsappNumber}";

  // Open modal
  openModalBtn?.addEventListener("click", () => {
    modalBackdrop?.classList.add("active");
    document.body.style.overflow = "hidden";

    // Reset search
    if (menuSearch) {
      menuSearch.value = "";
    }
    if (clearSearch) {
      clearSearch.style.display = "none";
    }

    // Reset filters
    filterTabs.forEach((tab) => tab.classList.remove("active"));
    const allTab = document.querySelector(
      '[data-category="all"]'
    ) as HTMLButtonElement | null;
    allTab?.classList.add("active");

    // Show all items
    menuItems.forEach((item) => {
      (item as HTMLElement).style.display = "block";
    });

    if (noResults) {
      noResults.style.display = "none";
    }
  });

  // Close modal
  const closeModal = () => {
    modalBackdrop?.classList.remove("active");
    document.body.style.overflow = "";
  };

  closeModalBtn?.addEventListener("click", closeModal);

  // Close modal when clicking backdrop
  modalBackdrop?.addEventListener("click", (e) => {
    if (e.target === modalBackdrop) {
      closeModal();
    }
  });

  // Close modal with Escape key
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && modalBackdrop?.classList.contains("active")) {
      closeModal();
    }
  });

  // Prevent modal content from closing when clicked
  modalContainer?.addEventListener("click", (e) => {
    e.stopPropagation();
  });

  // Search functionality with debouncing
  let searchTimeout: number;
  menuSearch?.addEventListener("input", (e) => {
    const target = e.target as HTMLInputElement;
    const searchTerm = target.value.toLowerCase();

    // Show/hide clear button
    if (clearSearch) {
      clearSearch.style.display = searchTerm ? "flex" : "none";
    }

    clearTimeout(searchTimeout);
    searchTimeout = window.setTimeout(() => {
      filterMenu(searchTerm, getActiveCategory());
    }, 200);
  });

  // Clear search
  clearSearch?.addEventListener("click", () => {
    if (menuSearch) {
      menuSearch.value = "";
      menuSearch.focus();
    }
    if (clearSearch) {
      clearSearch.style.display = "none";
    }
    filterMenu("", getActiveCategory());
  });

  // Filter tabs functionality
  filterTabs.forEach((tab) => {
    tab.addEventListener("click", () => {
      // Remove active class from all tabs
      filterTabs.forEach((t) => t.classList.remove("active"));
      // Add active class to clicked tab
      tab.classList.add("active");

      const category = tab.getAttribute("data-category") || "all";
      const searchTerm = menuSearch?.value.toLowerCase() || "";
      filterMenu(searchTerm, category);
    });
  });

  // Get active category
  function getActiveCategory(): string {
    const activeTab = document.querySelector(
      ".filter-tab.active"
    ) as HTMLButtonElement | null;
    return activeTab ? activeTab.getAttribute("data-category") || "all" : "all";
  }

  // Filter menu items
  function filterMenu(searchTerm: string, category: string): void {
    let visibleCount = 0;

    menuItems.forEach((item, index) => {
      const itemName = item.getAttribute("data-name") || "";
      const itemCategory = item.getAttribute("data-category") || "";
      const htmlItem = item as HTMLElement;

      const matchesSearch = itemName.includes(searchTerm);
      const matchesCategory = category === "all" || itemCategory === category;

      if (matchesSearch && matchesCategory) {
        htmlItem.style.display = "block";
        // Re-trigger animation
        htmlItem.style.animation = "none";
        htmlItem.offsetHeight; // Force reflow
        htmlItem.style.animation = `fadeInUp 0.3s ease forwards`;
        htmlItem.style.animationDelay = `${visibleCount * 0.05}s`;
        visibleCount++;
      } else {
        htmlItem.style.display = "none";
      }
    });

    // Show/hide no results message
    if (noResults) {
      noResults.style.display = visibleCount === 0 ? "block" : "none";
    }
  }

  // WhatsApp order functionality
  orderBtns.forEach((btn) => {
    btn.addEventListener("click", (e) => {
      e.preventDefault();

      const itemName = btn.getAttribute("data-item") || "";
      const itemPrice = btn.getAttribute("data-price") || "";

      // Create WhatsApp message
      const message = `Hi! I'd like to order:\n\n${itemName}\nPrice: KSh ${itemPrice}\n\nPlease confirm availability and delivery details. Thank you!`;
      const encodedMessage = encodeURIComponent(message);
      const whatsappUrl = `https://wa.me/${whatsappNumber.replace("+", "")}?text=${encodedMessage}`;

      // Button feedback
      const originalText = btn.textContent || "";
      btn.textContent = "Ordered!";
      btn.style.background = "linear-gradient(135deg, #059669, #047857)";

      setTimeout(() => {
        btn.textContent = originalText;
        btn.style.background = "linear-gradient(135deg, #10b981, #059669)";
      }, 1500);

      // Open WhatsApp
      window.open(whatsappUrl, "_blank");

      // Show toast notification
      showToast(`${itemName} sent to WhatsApp!`);
    });
  });

  // Toast notification
  function showToast(message: string): void {
    const toast = document.createElement("div");
    toast.innerHTML = `
      <div style="
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        padding: 12px 16px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        z-index: 10000;
        font-weight: 600;
        font-size: 0.9rem;
        transform: translateX(100%);
        transition: transform 0.3s ease;
        max-width: 280px;
      ">
        ${message}
      </div>
    `;

    document.body.appendChild(toast);
    const toastEl = toast.firstElementChild as HTMLElement;

    // Animate in
    setTimeout(() => {
      toastEl.style.transform = "translateX(0)";
    }, 100);

    // Animate out and remove
    setTimeout(() => {
      toastEl.style.transform = "translateX(100%)";
      setTimeout(() => {
        toast.remove();
      }, 300);
    }, 3000);
  }

  // Initialize
  document.addEventListener("DOMContentLoaded", () => {
    console.log("Restaurant Modal ready!");
  });
</script>
